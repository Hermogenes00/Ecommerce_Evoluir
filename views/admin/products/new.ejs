<%- include('../../partials/header') %>
<%- include('../../partials/navbaradmin') %>

<script src="/js/product.js"></script>


<div class="container mt-2">
    <% if(message.erro.length>0){%>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <%= message.erro %>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <%} %>

</div>

<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            Cadastro de produtos
        </div>
        <div class="card-body">
            <form action="/admin/products/save" method="POST" class="form">
                <div class="row" style="float: left;">
                    <div class="col-md-3">
                        <img src="<%= product.imagem?product.imagem:'/images/imagem_default.jpg'%>" width="250"
                            height="250" id="imgLocal" alt="">
                        <input type="file" name="arquivo" class="form-control form-control-sm" id="arquivo"
                            onchange="lerArquivo(event)">
                        <input type="hidden" name="imagem" value="<%= product.imagem %>" id="imagem">
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="nome">Nome</label>
                        <input type="text" value="<%= product.nome %>" name="nome" id="nome"
                            class="form-control form-control-sm">
                    </div>

                </div>
                <div class="row">
                    <div class="col">
                        <label for="codRef">Cod.Ref</label>
                        <input type="text" value="<%= product.codRef %>" name="codRef" id="codRef"
                            class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="codRef">Categoria</label>
                        <select onchange="localizarSubCategoria(event)" name="categoria" data-id="<%=product.id %>"
                            id="categoria" class="form-control form-control-sm">
                        </select>
                    </div>
                    <div class="col">
                        <label for="codRef">SubCategoria</label>
                        <select name="subCategoria" id="subCategoria" class="form-control form-control-sm">
                            <option></option>
                        </select>
                    </div>
                </div>
                <hr>

                <div class="row">

                    <div class="col">
                        <label for="descricao">Descricao</label>
                        <textarea name="descricao" id="descricao"><%= product.descricao %></textarea>
                    </div>

                </div>
                <hr>
                <div class="row">
                    <div class="col-md-3">
                        <label for="tamFinalAltura">Tam.Final-Altura</label>
                        <input type="text" placeholder="150" name="tamFinalAltura"
                            value="<%= product.tamFinalAltura?product.tamFinalAltura:'0,00'%>"
                            id="tamFinalAltura" required class="form-control form-control-sm">
                    </div>
                    <div class="col-md-3">
                        <label for="tamFinalLargura">Tam.Final-Largura</label>
                        <input type="text" placeholder="150" name="tamFinalLargura"
                            value="<%= product.tamFinalLargura?product.tamFinalLargura:'0,00' %>"
                            id="tamFinalLargura" required class="form-control form-control-sm">
                    </div>

                    <div class="col">
                        <label for="tamSangriaLargura">Tam.Sangria-Largura</label>
                        <input type="text" placeholder="150"
                            value="<%= product.tamSangriaLargura?product.tamSangriaLargura:'0,00' %>"
                            name="tamSangriaLargura" id="tamSangriaLargura" required
                            class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="tamSangriaAltura">Tam.Sangria-Altura</label>
                        <input type="text" placeholder="150"
                            value="<%= product.tamSangriaAltura?product.tamSangriaAltura:'0,00' %>"
                            name="tamSangriaAltura" id="tamSangriaAltura" required class="form-control form-control-sm">
                    </div>
                </div>

                <div class="row">

                    <div class="col">
                        <label for="material">Material</label>
                        <input type="text" value="<%= product.material %>" name="material" id="material"
                            class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="gramatura">Gramatura</label>
                        <input type="text"
                            value="<%= product.gramatura?product.gramatura:'0,00' %>"
                            name="gramatura" id="gramatura" class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="peso">Peso</label>
                        <input type="text" placeholder="Ex: 150"
                            value="<%= product.peso?product.peso:'0,00' %>"
                            name="peso" id="peso" class="form-control form-control-sm">
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col">
                        <label for="vlrProduto">Vlr Produto</label>
                        <input type="text"
                            value="<%= product.vlrProduto?product.vlrProduto:'0,00' %>"
                            name="vlrProduto" id="vlrProduto" class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="qtd">Quantidade</label>
                        <input type="text" value="<%=product.qtd?product.qtd:'0,00'%>" name="qtd" id="qtd"
                            class="form-control form-control-sm">
                    </div>
                    <div class="col">
                        <label for="qtd">Und</label>
                        <select name="und" id="und" class="form-control form-control-sm">
                            <option <%=product.und=='und'?'selected':'' %> value="und">Und</option>
                            <option <%=product.und=='metroQuadrado'?'selected':''%> value="metroQuadrado">M²</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="qtd">Prev. Produção</label>
                        <input type="number" name="previsaoProducao" id="previsaoProducao"
                            class="form-control form-control-sm"
                            value="<%=product.previsaoProducao?product.previsaoProducao:'0,00'%>">
                    </div>
                    <div class="col">
                        <label for="propriedadeDivisao">Propriedade de Divisão</label>
                        <input type="number" required
                            value="<%=product.propriedadeDivisao?product.propriedadeDivisao:'0,00'%>"
                            name="propriedadeDivisao" id="propriedadeDivisao" class="form-control form-control-sm">
                    </div>
                </div>

                <div class=" mt-3" style=" float: right;">
                    <a href="/collaborator/find/all" class="btn btn-outline-primary">Cancelar</a>
                    <input type="submit" class="btn btn-primary" value="Salvar">

                </div>
        </div>
        </form>
    </div>
</div>

<%- include('../../partials/footer') %>
<script src="/js/categoria.js"></script>